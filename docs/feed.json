{
    "version": "https://jsonfeed.org/version/1",
    "title": "Scott&apos;s Blog",
    "home_page_url": "http://localhost:4000/",
    "feed_url": "http://localhost:4000/feed.json",
    "description": "A blog of data analytics and its applications.",
    "icon": "http://localhost:4000/apple-touch-icon.png",
    "favicon": "http://localhost:4000/favicon.ico",
    "expired": false,
    
    "author": "{"twitter"=>nil, "name"=>nil, "avatar"=>nil, "email"=>nil, "url"=>nil}",
    
"items": [
    
        {
            "id": "http://localhost:4000/2022/07/16/a-few-charts-on-eu-energy",
            "title": "A Few Charts on EU Energy",
            "summary": "A Few Charts on EU Energy",
            "content_text": "IntroductionHouse prices are constantly in the news. However, basically any news story I’ve read about house prices doesn’t really focus on very granular data - usually talking about the country overall, or dividing by region and perhaps doing a deep dive into a specific locality. The focus of the post is to look at house prices at a very local level, which 1) should hopefully show some interesting trends and 2) allows me to learn a bit about making interactive maps in R.",
            "content_html": "<h2 id=\"introduction\">Introduction</h2><p>House prices are constantly in the news. However, basically any news story I’ve read about house prices doesn’t really focus on very granular data - usually talking about the country overall, or dividing by region and perhaps doing a deep dive into a specific locality. The focus of the post is to look at house prices at a very local level, which 1) should hopefully show some interesting trends and 2) allows me to learn a bit about making interactive maps in R.</p><p><img src=\"/assets/images/a-few-charts-on-eu-energy/DB_plot-01.png\" alt=\"\" /></p><p><img src=\"/assets/images/a-few-charts-on-eu-energy/energy mix fonts 2020-01-01.png\" alt=\"\" /></p><p><img src=\"/assets/images/a-few-charts-on-eu-energy/energy mix fonts-09-01.png\" alt=\"\" /></p><p><img src=\"/assets/images/a-few-charts-on-eu-energy/gas_facet1-01.png\" alt=\"\" /></p>",
            "url": "http://localhost:4000/2022/07/16/a-few-charts-on-eu-energy",
            
            
            
            
            
            "date_published": "2022-07-16T00:00:00+01:00",
            "date_modified": "2022-07-16T00:00:00+01:00",
            
                "author": 
                "{"twitter"=>nil, "name"=>nil, "avatar"=>nil, "email"=>nil, "url"=>nil}"
                
            
        },
    
        {
            "id": "http://localhost:4000/2022/06/24/mapping-uk-house-prices-in-r",
            "title": "Mapping English and Welsh House Prices in R",
            "summary": "Mapping English and Welsh House Prices in R",
            "content_text": "IntroductionHouse prices are constantly in the news, however, basically all the news stories I’ve read about this topic don’t focus on very granular data - instead talking about the country overall, or dividing prices by region and perhaps doing a deep dive into a specific locality. The focus of the post is to therefore look at house prices nationally - at a very local level. This should 1) hopefully show some interesting trends and 2) allow me to learn a bit about making interactive maps in R.DataThe data on house prices was taken from the May release of the “Prices Paid” dataset, collected by HM Land Registry. This is a dataset of all registered property sales in England &amp; Wales from 1995 to present. It contains information on the price paid for each property as well as the postcode, address and other info (e.g. property type, new build/old build). Ideally, I wanted to get data for the whole of the UK, but Scotland does not provide this data in an easily accessible manner (as far as I know) and any property data for Northern Ireland apparently requires a paid license to access, so I was left with just English and Welsh data.To map this data, I needed to match the postcodes to geographic coordinates and geographic areas. I used the ONS National Postcode Lookup to do this. The Postcode Lookup details every postcode in the UK and their associated latitude/longitude as well as the geographic areas that they belong to (e.g. Local Authority District, Middle Super Output Area).Some other important datasets I needed for creating some of the maps were the shapefiles for the geographic areas I wanted to look at, which were also from the ONS.One final dataset is from the House of Commons (HoC) Library. For Middle Super Output Areas (MSOA) - which is an area type I wanted to visualise, they generally don’t have names and are just named based on their local authority district (e.g. Great Yarmouth 1, Great Yarmouth 2), however the HoC Library has devised actual descriptive names for these areas (e.g. Hemsby &amp; Oremsby, Fleggburgh/ Rollesby &amp; Martham), which are a bit nicer for presenting and analysing the data at a MSOA level.General MethodDue to reporting time lags, it’s generally not best practice to look at data from the last few months, so I only looked at data up to March 2022. This should hopefully reduce the impact of reporting lags, while also providing fairly up to date figures.Additionally, because I am drilling down into rather small areas, just using sales from March 2022 would lead to a very small sample size for a lot of areas, which wouldn’t be very accurate. So I decided to look at the median price over the whole year for each area (March 2021 - March 2022). I didn’t adjust for property type mix as a lot of house price indexes do, instead opting to look at the unadjusted values.I also decided to bin the price/sale values for colouring the maps, as I think it makes it easier to visually interpret the difference in price between areas. The bins I used were generally not equal width, but instead were somewhat similar to log scales, where larger values had larger bins, to reduce the total number of bins, while not crowding out the lower prices areas like a continuous scale would. The colour scales used were from the scico and viridis packages, which are perceptually uniform and colourblind friendly, making them good for this sort of visualisation.To make the maps interactive, I used the Leaflet package in R, which is build on top of the Leaflet JavaScript library. There are quite a lot of interesting features in this package that I tried to make the most of, e.g. adding dynamic lables, using multiple basemaps to show location labels on top of the polygon layers and having multiple polygon layers that are visible at different zoom levels.Chloropleth mapsThe first map type I looked at was a chloropleth, shown below. The map initially shows median house prices and the number of sales at a Local Authority District (LAD) level of granularity. However if you zoom in, it will break the LADs down to MSOAs (essentially one layer below - ignoring wards as they don’t match perfectly). This allows you to get a broader and less crowded view at the national level and still explore regional variations at a high level of granularity.       Click here for the code that was used to generate this map       chloropleth &lt;-  leaflet() %&gt;%          setView(lng = -0.5, lat = 53.25, zoom = 6.00) %&gt;%         addMapPane(\"background\", zIndex = 100) %&gt;%         addMapPane(\"data\", zIndex = 101) %&gt;%         addMapPane(\"labels\", zIndex = 102) %&gt;%         addProviderTiles(providers$CartoDB.PositronNoLabels,                             options = providerTileOptions(pane = \"background\", minZoom = 6)) %&gt;%         addPolygons(data = msoa_leaflet_change,fillColor = ~pal(msoa_leaflet_change$price_bins_post), stroke = TRUE, color = \"white\",weight = 0.75, fillOpacity = 0.75,                    label = labels, group = \"x\", options = pathOptions(pane = \"data\")) %&gt;%         addPolygons(data = lad_leaflet_change, fillColor = ~pal(lad_leaflet_change$price_bins_post), stroke = TRUE, color = \"white\",weight = 0.75, fillOpacity = 0.75,                    group = \"y\", label = labels_x, options = pathOptions(pane = \"data\")) %&gt;%         addProviderTiles(providers$CartoDB.PositronOnlyLabels,                             options = providerTileOptions(pane = \"labels\",minZoom = 6)) %&gt;%         groupOptions(\"x\", zoomLevels = 11:20) %&gt;%         groupOptions(\"y\", zoomLevels = 0:10) %&gt;%         addLegend(\"bottomright\", pal = pal, values = c(\"0-150k\", \"150k-250k\", \"250k-350k\", \"350k-450k\", \"450k-750k\", \"750k-1m\", \"Above 1m\"))    saveWidget(chloropleth, \"Widgets/chloropleth.html\")  Grid mapsThere is also an st_make_grid() function in the sf package that can be used to divide an area into equal sized grid squares and then summarise the data within each grid square.The grid squares I used are supposedly 25km^2 for the England and Wales maps and 0.75km^2 for the London map (see both below). Leaflet uses the Web Mercator (3875) coordinate referencing system (CRS) to display maps, which essentially flattens maps to make them look nice for the web. However, it does this at the expense of accurate distances, which gets worse the further you move from the equator. This makes me question how accurate these grid square sizes are. It would probably be better to use a CRS like the UK National Grid (27700), which does not distort distances like the Web Mercator CRS, but leaflet doesn’t support this, atleast not if you want to use pretty basemaps.In any case, these grid squares can be used to create quite detailed maps of house prices and house sales. The main differences compared to chloropleth maps are that grid maps don’t say anything about population density/property density and because of this there are quite a lot of grid-squares with just a few observations, which may impact the reliability of the presented median prices. At the same time, using equally sized grid-squares does allow for a more granular view of the actual house prices and sales across the country, which can reveal insight which may have been hidden by using other map types. e.g. you can see a few grid squares with very highly priced properties but only 1 or 2 sales above Erith in the London map below.Below you can see maps of the UK, coloured firstly by property price and secondly by number of sales.        I also created a grid map just for London, as London has a high population (~8.9 million) and a whole bunch of regional inequalities. I therefore thought it would be interesting to visualise it individually. I also used different price bins to better represent London’s property market, which is why the colours are different to the other price maps.    Point-grid mapsAdditionally, the st_centroid() function can be used to find the centre of each grid-square. From this we can create what I’ve called “point-grid” maps (not sure if there is an actual name for this kind of map, but I have seen some other examples). These maps can use both colour and size scales to show both total sales and median price, which isn’t shown in the other maps here. The drawback of this type of map is that it can become harder to see the individual points in high turnover area e.g. London or Birmingham, due to overlapping points - although a log size scale can somewhat fix this.See a point-grid map for the UK below, using a logged size scale.    Static mapsFinally, I also put together a static map at the MSOA level for my own amusement:",
            "content_html": "<h3 id=\"introduction\">Introduction</h3><p>House prices are constantly in the news, however, basically all the news stories I’ve read about this topic don’t focus on very granular data - instead talking about the country overall, or dividing prices by region and perhaps doing a deep dive into a specific locality. The focus of the post is to therefore look at house prices nationally - at a very local level. This should 1) hopefully show some interesting trends and 2) allow me to learn a bit about making interactive maps in R.</p><h3 id=\"data\">Data</h3><p>The data on house prices was taken from the May release of the “Prices Paid” dataset, collected by HM Land Registry. This is a dataset of all registered property sales in England &amp; Wales from 1995 to present. It contains information on the price paid for each property as well as the postcode, address and other info (e.g. property type, new build/old build). Ideally, I wanted to get data for the whole of the UK, but Scotland does not provide this data in an easily accessible manner (as far as I know) and any property data for Northern Ireland apparently requires a paid license to access, so I was left with just English and Welsh data.</p><p>To map this data, I needed to match the postcodes to geographic coordinates and geographic areas. I used the ONS National Postcode Lookup to do this. The Postcode Lookup details every postcode in the UK and their associated latitude/longitude as well as the geographic areas that they belong to (e.g. Local Authority District, Middle Super Output Area).</p><p>Some other important datasets I needed for creating some of the maps were the shapefiles for the geographic areas I wanted to look at, which were also from the ONS.</p><p>One final dataset is from the House of Commons (HoC) Library. For Middle Super Output Areas (MSOA) - which is an area type I wanted to visualise, they generally don’t have names and are just named based on their local authority district (e.g. Great Yarmouth 1, Great Yarmouth 2), however the HoC Library has devised actual descriptive names for these areas (e.g. Hemsby &amp; Oremsby, Fleggburgh/ Rollesby &amp; Martham), which are a bit nicer for presenting and analysing the data at a MSOA level.</p><h3 id=\"general-method\">General Method</h3><p>Due to reporting time lags, it’s generally not best practice to look at data from the last few months, so I only looked at data up to March 2022. This should hopefully reduce the impact of reporting lags, while also providing fairly up to date figures.</p><p>Additionally, because I am drilling down into rather small areas, just using sales from March 2022 would lead to a very small sample size for a lot of areas, which wouldn’t be very accurate. So I decided to look at the median price over the whole year for each area (March 2021 - March 2022). I didn’t adjust for property type mix as a lot of house price indexes do, instead opting to look at the unadjusted values.</p><p>I also decided to bin the price/sale values for colouring the maps, as I think it makes it easier to visually interpret the difference in price between areas. The bins I used were generally not equal width, but instead were somewhat similar to log scales, where larger values had larger bins, to reduce the total number of bins, while not crowding out the lower prices areas like a continuous scale would. The colour scales used were from the scico and viridis packages, which are perceptually uniform and colourblind friendly, making them good for this sort of visualisation.</p><p>To make the maps interactive, I used the Leaflet package in R, which is build on top of the Leaflet JavaScript library. There are quite a lot of interesting features in this package that I tried to make the most of, e.g. adding dynamic lables, using multiple basemaps to show location labels on top of the polygon layers and having multiple polygon layers that are visible at different zoom levels.</p><h4 id=\"chloropleth-maps\">Chloropleth maps</h4><p>The first map type I looked at was a chloropleth, shown below. The map initially shows median house prices and the number of sales at a Local Authority District (LAD) level of granularity. However if you zoom in, it will break the LADs down to MSOAs (essentially one layer below - ignoring wards as they don’t match perfectly). This allows you to get a broader and less crowded view at the national level and still explore regional variations at a high level of granularity.</p><div style=\"width:100%;border:none\"><iframe src=\"/assets/widgets/house-prices/chloropleth2.html\" width=\"100%\" height=\"500px\" frameborder=\"0\"></iframe>    </div><details>  <summary> Click here for the code that was used to generate this map </summary>  <div class=\"language-r highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"w\">    </span><span class=\"n\">chloropleth</span><span class=\"w\"> </span><span class=\"o\">&lt;-</span><span class=\"w\">  </span><span class=\"n\">leaflet</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">          </span><span class=\"n\">setView</span><span class=\"p\">(</span><span class=\"n\">lng</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">-0.5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">lat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">53.25</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">zoom</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">6.00</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addMapPane</span><span class=\"p\">(</span><span class=\"s2\">\"background\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">zIndex</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">100</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addMapPane</span><span class=\"p\">(</span><span class=\"s2\">\"data\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">zIndex</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">101</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addMapPane</span><span class=\"p\">(</span><span class=\"s2\">\"labels\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">zIndex</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">102</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addProviderTiles</span><span class=\"p\">(</span><span class=\"n\">providers</span><span class=\"o\">$</span><span class=\"n\">CartoDB.PositronNoLabels</span><span class=\"p\">,</span><span class=\"w\">                             </span><span class=\"n\">options</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">providerTileOptions</span><span class=\"p\">(</span><span class=\"n\">pane</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"background\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">minZoom</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">6</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addPolygons</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">msoa_leaflet_change</span><span class=\"p\">,</span><span class=\"n\">fillColor</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">~</span><span class=\"n\">pal</span><span class=\"p\">(</span><span class=\"n\">msoa_leaflet_change</span><span class=\"o\">$</span><span class=\"n\">price_bins_post</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">stroke</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">TRUE</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">color</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"white\"</span><span class=\"p\">,</span><span class=\"n\">weight</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0.75</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">fillOpacity</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0.75</span><span class=\"p\">,</span><span class=\"w\">                    </span><span class=\"n\">label</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">labels</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">group</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">options</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">pathOptions</span><span class=\"p\">(</span><span class=\"n\">pane</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"data\"</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addPolygons</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">lad_leaflet_change</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">fillColor</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">~</span><span class=\"n\">pal</span><span class=\"p\">(</span><span class=\"n\">lad_leaflet_change</span><span class=\"o\">$</span><span class=\"n\">price_bins_post</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">stroke</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">TRUE</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">color</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"white\"</span><span class=\"p\">,</span><span class=\"n\">weight</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0.75</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">fillOpacity</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0.75</span><span class=\"p\">,</span><span class=\"w\">                    </span><span class=\"n\">group</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"y\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">label</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">labels_x</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">options</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">pathOptions</span><span class=\"p\">(</span><span class=\"n\">pane</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"data\"</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addProviderTiles</span><span class=\"p\">(</span><span class=\"n\">providers</span><span class=\"o\">$</span><span class=\"n\">CartoDB.PositronOnlyLabels</span><span class=\"p\">,</span><span class=\"w\">                             </span><span class=\"n\">options</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">providerTileOptions</span><span class=\"p\">(</span><span class=\"n\">pane</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"labels\"</span><span class=\"p\">,</span><span class=\"n\">minZoom</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">6</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">groupOptions</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">zoomLevels</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">11</span><span class=\"o\">:</span><span class=\"m\">20</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">groupOptions</span><span class=\"p\">(</span><span class=\"s2\">\"y\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">zoomLevels</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0</span><span class=\"o\">:</span><span class=\"m\">10</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">%&gt;%</span><span class=\"w\">         </span><span class=\"n\">addLegend</span><span class=\"p\">(</span><span class=\"s2\">\"bottomright\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">pal</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">pal</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">values</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">c</span><span class=\"p\">(</span><span class=\"s2\">\"0-150k\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"150k-250k\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"250k-350k\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"350k-450k\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"450k-750k\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"750k-1m\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"Above 1m\"</span><span class=\"p\">))</span><span class=\"w\">    </span><span class=\"n\">saveWidget</span><span class=\"p\">(</span><span class=\"n\">chloropleth</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"Widgets/chloropleth.html\"</span><span class=\"p\">)</span><span class=\"w\"></span></code></pre></div>  </div></details><p><br /></p><h4 id=\"grid-maps\">Grid maps</h4><p>There is also an <code class=\"language-plaintext highlighter-rouge\">st_make_grid()</code> function in the sf package that can be used to divide an area into equal sized grid squares and then summarise the data within each grid square.</p><p>The grid squares I used are supposedly 25km^2 for the England and Wales maps and 0.75km^2 for the London map (see both below). Leaflet uses the Web Mercator (3875) coordinate referencing system (CRS) to display maps, which essentially flattens maps to make them look nice for the web. However, it does this at the expense of accurate distances, which gets worse the further you move from the equator. This makes me question how accurate these grid square sizes are. It would probably be better to use a CRS like the UK National Grid (27700), which does not distort distances like the Web Mercator CRS, but leaflet doesn’t support this, atleast not if you want to use pretty basemaps.</p><p>In any case, these grid squares can be used to create quite detailed maps of house prices and house sales. The main differences compared to chloropleth maps are that grid maps don’t say anything about population density/property density and because of this there are quite a lot of grid-squares with just a few observations, which may impact the reliability of the presented median prices. At the same time, using equally sized grid-squares does allow for a more granular view of the actual house prices and sales across the country, which can reveal insight which may have been hidden by using other map types. e.g. you can see a few grid squares with very highly priced properties but only 1 or 2 sales above Erith in the London map below.</p><p>Below you can see maps of the UK, coloured firstly by property price and secondly by number of sales.</p><div style=\"width:100%;border:none\"><iframe src=\"/assets/widgets/house-prices/price_grid2.html\" width=\"100%\" height=\"500px\" frameborder=\"0\"></iframe>    </div><div style=\"width:100%;border:none\"><iframe src=\"/assets/widgets/house-prices/sales_grid4.html\" width=\"100%\" height=\"500px\" frameborder=\"0\"></iframe>    </div><p>I also created a grid map just for London, as London has a high population (~8.9 million) and a whole bunch of regional inequalities. I therefore thought it would be interesting to visualise it individually. I also used different price bins to better represent London’s property market, which is why the colours are different to the other price maps.</p><div style=\"width:100%;border:none\"><iframe src=\"/assets/widgets/house-prices/london_grid2.html\" width=\"100%\" height=\"500px\" frameborder=\"0\"></iframe>    </div><h4 id=\"point-grid-maps\">Point-grid maps</h4><p>Additionally, the <code class=\"language-plaintext highlighter-rouge\">st_centroid()</code> function can be used to find the centre of each grid-square. From this we can create what I’ve called “point-grid” maps (not sure if there is an actual name for this kind of map, but I have seen some other examples). These maps can use both colour and size scales to show both total sales and median price, which isn’t shown in the other maps here. The drawback of this type of map is that it can become harder to see the individual points in high turnover area e.g. London or Birmingham, due to overlapping points - although a log size scale can somewhat fix this.</p><p>See a point-grid map for the UK below, using a logged size scale.</p><div style=\"width:100%;border:none\"><iframe src=\"/assets/widgets/house-prices/log_point_grid2.html\" width=\"100%\" height=\"500px\" frameborder=\"0\"></iframe>    </div><h4 id=\"static-maps\">Static maps</h4><p>Finally, I also put together a static map at the MSOA level for my own amusement:</p><p><img src=\"/assets/images/house-prices/Total Plot v6-01.png\" alt=\"\" /></p>",
            "url": "http://localhost:4000/2022/06/24/mapping-uk-house-prices-in-r",
            
            
            
            "tags": ["R","Leaflet"],
            
            "date_published": "2022-06-24T00:00:00+01:00",
            "date_modified": "2022-06-24T00:00:00+01:00",
            
                "author": 
                "{"twitter"=>nil, "name"=>nil, "avatar"=>nil, "email"=>nil, "url"=>nil}"
                
            
        },
    
        {
            "id": "http://localhost:4000/2022/06/18/uk-mp-twitter-network-analysis",
            "title": "UK MP Twitter Network Analysis",
            "summary": "UK MP Twitter Network Analysis",
            "content_text": "IntroductionIn recent years, Twitter has become increasingly prominent in politics, not least due to ex-US President Donald Trump’s questionable use of the platform. But across the pond in the UK, politicians’ Twitter presences have been gradually growing over the years, as more MPs (and their teams) get online and start tweeting. Nowadays, with the majority of UK MPs on Twitter, there is an opportunity to gain insight into a number of areas, including MPs’ networks, political beliefs and public appeal. This insight can be gleamed from analysing MPs’ behaviour on the social network; from what they tweet, who they retweet, who they follow, who follows them etc…The area I would like to focus on in this blog post is the parliamentary twitter network as there is not a particularly large amount of research around this. A few previous reports and articles have shown than UK MPs generally tend to cluster together within their own parties, with regard to following relationships and also re-tweet networks (McLoughlin et al., 2019), (Sleeman, 2015), (Weaver et al., 2018). Although, events like the EU referendum have lead to more cross-party interaction in terms of at least tweeting behaviour (Weaver et al., 2018). However, most of this research is a number of years old and doesn’t really reflect the current parliament since the 2019 election. Moreover, the follower-following relationships of smaller parties (e.g. Lib Dems, SDLP, DUP) have not been looked at individually, as well as the within-party follower-following networks. So, in this post I am going to look at the follower-following relationships between UK MPs, with a focus on smaller parties’ overall networks and also on the within-party networks of the Labour and Conservative parties.DataThe data was gathered in February 2021 from Twitter’s API, using the Tweepy package in Python (as the data is from February, it doesn’t take into account any changes since then, e.g. Neale Hanvey &amp; Kenny MacAskill defecting from the SNP to the Alba party). I downloaded a spreadsheet from https://www.politics-social.com/ which contained each MP’s Twitter name, their party and their constituency. I then queried the API using Python to return a list of who each MP followed, along with their bio, follower count, like count, status count and a few other metrics. I ran into a few issues, e.g. some MPs had deleted their twitter accounts or had private profiles so I could not view their following list - so I removed those MPs from the dataset. As Twitter’s free API has limits on how much data you can download in a given period, it took over 10 hours for all the data to be collected. I then did a bit of data manipulation in Python and R to get the data into the correct format for analysis and visualisation. Python and R code available here.Outline of MP Follower-Following RelationshipsIn Table 1, I have arranged a number of summary statistics for each party. I have used median and Interquartile range (IQR) stats as there are a lot of outliers and the data is not normally distributed - you can see the distribution of the number of MP Followers for all parliamentarians in Figure 1. As previous research has shown, generally MPs’ following-followers relationships tend to mostly be to their own parties. This leads to the average MP followers statistic mostly reflecting the number of MPs on twitter for each party, although this relationship doesn’t really hold for some of the very small parties (see the below table). However, while the Conservatives have on average more MP followers (i.e. followers who are MPs), they actually have less median total followers than most other parties, including Labour and the SNP. The Green Party has the 4th highest average MP followers and by far the most average total followers, but that is obviously due to there being only one (popular) Green MP - Caroline Lucas. The SNP has a modest median total followers relative to the Tories, Labour and the Lib Dems, possibly reflecting the geographic focus of the party. The Lib Dems have quite a high median total followers and low median MP followers. The other minor parties have fairly similar total followers and MP follower counts, apart from Sinn Féin, who have a relatively low average MP followers and high median total followers, and the SDLP, who have very high values for both stats.Table 1: Summary of parties’ twitter followingsAdditionally, the Tories and Labour have quite a high variability of total followers, as measured by IQR, compared to other parties. Table 1 also shows the MPs from each party with the highest MP and total followers. For example, looking at Labour, Keir Starmer has the most MP followers, but with just over 1 million total followers, he trails ex-leader Jeremy Corbyn by a wide margin.Figure 1: Distribution of MP Followers by PartyFurthermore, ranking MPs by their number of MP followers can show some interesting results (see Table 2 below). Firstly, the majority of the MPs most followed by other MPs are Tories, with senior leadership and ex-leadership figures taking the top spots of the ranking. The Speaker, Lindsay Hoyle, however, comes in 3rd, reflecting his apolitical role in parliament. The only other non-Tory MPs in the top 25 are three Labour MPs - Keir Starmer, Ed Miliband and Wes Streeting.Table 2: MPs followed by the most other MPsOne relationship, which I mentioned earlier and would like to expand on, is that while the Tories do on average have more MP followers than their Labour counterparts, Labour MPs on average have more total followers. This is visualised in Figure 2 (below). This seems to show that although the Conservatives are more linked to one another in terms of following relationships, they actually have a harder time getting follows from the general public compared to Labour. I suspect this is due to Twitter having a relatively left-wing user-base, combined with Labour MPs possibly having a stronger online presence. The distribution of MPs from other parties is also visible in the figure, with most of them clustered in the left hand side of the charts.insert imagesA great way to visualise the following-follower relations between MPs is network visualisation. To do this I used a piece of open source software called Gephi (Bastian et al., 2009). In short, networks are made up of nodes and edges (connections) between the nodes. I used an algorithm to create the network visualisations called ForceAtlas2 (Jacomy et al., 2014), which essentially creates a graph where each node is clustered together with other similar nodes (in terms of their connections). In this case, each node represents one MP and each edge shows that one MP follows another MP. The nodes are also coloured based on party affiliation and sized relative to the number of connections each MP has to other MPs (the labels are also thus sized by the same metric). Both follower and following relations are included.From running this algorithm, the below visualisation (Figure 3) was produced. As we can see, each of the large parties have their own clusters, but there are some MPs from both the Conservative and Labour who have floated off a bit into the centre of the graph, as they have quite a few connections to MPs from other parties relative to their own parties. Notably, Eleanor Laign, Nadhim Zahawi, Matt Warman, Andrew Rosindell and James Cleverly for the Tories and Darren Jones, Wes Streeting, Luke Pollard, Chris Bryant and Keir Starmer for Labour. The Speaker, Lindsay Hoyle is by no surprise right in the middle of the graph. Generally the minor parties (including the SNP) are quite clustered together, apart from the DUP, but I will elaborate on this further in the next section.insert imagesWhile Figure 3 does visually show how parties are interconnected, I also thought it would be nice to quantify how insular parties and MPs are (e.g. what percentage of MPs followed by each specific MP belong to the same party as that specific MP?). You can see in Table 3, that Conservative Party MPs were the most insular on average, followed by Labour and then the SNP and other minor parties. There were also 38 Conservative MPs who only followed other Tories, while there were only 5 Labour MPs who purely followed other Labour MPs. There were no MPs from other parties who only followed MPs from their own party. Additionally, in Figure 4 you can see that while Tory MPs in total had nearly twice the number of following relations to their own party compared to Labour’s own party relations, the Tories had fewer following relations to every other party (except the DUP) than Labour. One possible way to explain the difference in insularity across parties is that it is related to party size; less dominant and smaller parties require more collaboration with other parties to make an impact. The Conservative party, which has been the largest party and continuously in government since 2010, relies less on cross-party relationships compared to the other parties, so is therefore the most insular. You could also consider this from the opposite angle, looking at who each specific MP was followed by or you could look at mutual following-follower relationships.insert imagesHow Do the Minor Parties Fit Into the Network?Although it is fairly easy to see how the Labour and Conservative parties interact with one another, smaller party MPs’ connections are quite hard to distinguish in Figure 3. Thus I have filtered the graph to show only the connections of MPs of each of the smaller parties (visualised below in Figure 5 - click on each graph in Figure 5 for a closer look). In Figure 4, you can also see the number of following relationships from each specific party to each other party (read the graph from the left across and down to find the number of following relationships from the source party (left) to each target party (bottom) and vice-versa for the number of followed relationships).insert imagesOverall there are some interesting observations that generally correspond to each party’s political stance and to the extent they have worked with each of the other parties.The Alliance Party has a fairly even number of links with the Tories and Labour, and a number of links to the Lib Dems and the SNP and some of the other minor parties and NI parties.The DUP mostly has links with the Conservative party, likely because they have similar ideologies and also have worked with the Conservatives previously to prop up Theresa May’s government. They have few links to Labour and the SNP, but a number of links to some of the other NI parties.The Green Party, although having only one MP, have quite a number of links - especially to the Labour party. They also have a number of connections to the SNP, the Lib Dems and other minor parties like the SDLP, but few links to the Tories, relative to the number of connections to other parties and the size of the Tory party.The Liberal Democrats live up to their reputation as the party of the middle ground (at least excluding Brexit), as they are well connected to the two main parties and the SNP. They also have some links to parties like the Greens, SDLP and Alliance.Plaid Cymru are characterised by having denser links to the SNP compared to any other minor party and a roughly similar number of linkages to both the Conservatives and Labour.The SDLP have more connections to Labour than the Conservatives and quite a few links to the SNP (more than Alliance, DUP and Sinn Féin, but less than Plaid Cymru and the Lib Dems).Sinn Féin have relatively minimal links to any of the other parties (relative to the number of MPs they have), especially compared to other NI parties like the DUP, Alliance or the SDLP, which is possibly representative of their abstentionist approach to the UK parliament. Although they do have more links to Labour than the Tories.The SNP, being the 3rd largest party in Westminster, have lots of connections to both Labour and the Tories (more to the former) as well as to most of the minor parties. To better see the SNP’s links to other smaller parties, take a look at each party’s own chart in Figure 5 or look at Figure 4.insert gallery of minor partiesWithin-Party CommunitiesIt is also possible to look at the follower-following relations between MPs of just one party. The networks of Labour and the Conservatives are of course the largest and in my opinion thus the most interesting to consider when looking at within-party relations.For these networks I have filtered the edges so that there are only connections between nodes if MPs have a mutual following relationship (i.e. they both follow each other’s accounts). I didn’t do this in the previous graphs as I thought it might remove a lot of detail for parties with few MPs and MPs with few connections, but looking within larger parties, I want to slim down the number of edges and focus on the stronger mutual following relations between MPs.The networks are again made using the ForceAtlas2 algorithm, so nodes are situated near other similar nodes in terms their position in the network. I have also divided the network into a number of groups based on a community detection algorithm call the Louvain Method (De Meo et al., 2011). This algorithm divides the network into groups of “modularity classes” that generally have denser connections to nodes within the same class that to nodes within other classes. The algorithm has a parameter called “resolution”. Increasing the value of the resolution divides the network into fewer and larger groups and decreasing the value creates more and smaller groups. There thus seems to be a bit of discretion involved in choosing the resolution. I found that dividing the network into many small groups did not really produce anything that interesting and was quite noisy. Having 2-3 main groups per network seemed to be more revealing in terms of mutual following relationships.Looking firstly at Labour&lt;/strong&gt; and employing the Louvain Method, I uncovered three communities within the network - designated by the different colours in Figure 6 (red, yellow and cyan). I’ve also created an interactive version of Figure 6 - https://scottw2.github.io/UKMPsTwitter/LabourNetwork/. For some reason the interactive graphs are upside down compared to the static ones.The red community is generally those MPs to the political left of the party, e.g. Jeremy Corbyn, John McDonnell, Zara Sultana, Clive Lewis, Rebecca Long-Bailey. As another example, 33 of the 34 MPs in Labour’s Socialist Campaign Group, a left wing pressure group of MPs, can be found within the red community, with the remaining one in the yellow group.The cyan community appears to be characterised by generally being comprised of Labour’s more centrist or soft-left MPs, e.g. Ed Milliband, Keir Starmer, Jess Phillips, Hilary Benn and Margaret Hodge. So it looks like the red and cyan communities can broadly by divided by left-right politics.Those within the yellow community are probably MPs that are generally somewhere in the middle of Labour’s political spectrum, as demonstrated by most of the yellow community being in the centre of the network. This community can broadly be categorised by having a more evenly distributed number of links to red and blue community members compared to the balance of links the MPs in those two communities have with MPs in their own community compared to colleagues in the other community.insert imagesMoving onto the Conservative network, there are again three main modularity classes as shown in Figure 7 (although a few individual MPs actually had their own additional classes), (dark) blue, cyan and orange. The interactive version of Figure 7 is here: https://scottw2.github.io/UKMPsTwitter/ToryNetwork/. The division of this network is a bit more nuanced than that of Labour, as I believe what the groups reveal is only somewhat based on (left-right) politics and partly based on seniority or “who you know”.Within the orange group appears to be many of the most prominent Brexiteers, e.g. Michael Gove, Jacob Rees Mogg, Tom Tugendhat, Dominic Raab. However, there are some orange group MPs who were originally backing Remain but ended up endorsing Brexit after the referendum e.g. Chloe Smith, Helen Whatley and Alun Cairns. So there seems to be some additional factors linking this group together.The blue community is also quite diverse politically, and similarly to the orange group, features a few big Brexiteers like Andrea Leadsom and Boris Johnson. What is interesting to note is that Johnson appears, not in a central position in the network, but on the left hand fringe, with his allies mostly spread around the top left section of the network. A second factor held in common by both the blue and orange groups is the prevalence of most “one nation” conservatives in those two groups, compared to the cyan group. The blue group is particularly populated by one nation Tories, with senior one nation Tories like Damian Green (Chair of the One Nation Conservative caucus) and Robert Buckland (Vice President of the Tory Reform Group - a one nation promoting pressure group) part of this community, along with a large number of other MPs reportedly following this ideology. Members of the Cornerstone Group, a collection of Tory MPs who espouse “traditional” socially conservative values, are also generally located within the orange and blue communities. Additionally, MPs who were members of the Thatcherite Free Enterprise Group, founded by Liz Truss, are mostly situated in the blue community, but with some spillover to the orange and cyan groups - more so to the former.The cyan community appears to be made up of some more senior MPs near the centre of the network, but also the majority of the new MPs who were elected for the first time in the 2019 general election, particularly in the fringe of the cyan network. This implies, to an extent, there is a possible division of seniority between the orange/blue and cyan communities. This may also explain why there are less members of the parliamentary groups mentioned in the previous paragraph within the cyan community - as new MPs may not have had time to integrate themselves into the different groups within the party, or at least haven’t been listed as members online yet.Nevertheless, there still appears to be a division of seniority between the orange/blue and cyan groups, which could be down to a number of reasons. Firstly, as there is generally some clustering of the party based on a combination of seniority and ideology, maybe some of the old guard are somewhat suspicious of the new MPs, particularly those elected into traditionally Labour constituencies, and have thus kept their distance. On the other hand, this may just be a division within the Twitterverse, and newer and more senior MPs might just not have connected on Twitter yet. Plus it possibly may be to do with some kind of social media strategy during the general election, where new candidates’ Twitter accounts were set up and made to follow one another, so newer MPs are very interconnected with one another but have relatively fewer connections to many senior MPs. Overall, I suspect the divisions of the network may be a product of all three reasons and maybe some others I haven’t thought of. This possibly reveals that current Tory MPs are a bit more cliquey and hierarchical compared to the Labour party (at-least on Twitter). Although this difference could also be due to the influx of new Tory MPs and decrease in Labour MPs in 2019. In any case, the current Labour networks appears to be more politically divided between the left and right compared to the Conservative network.insert imagesConclusionOverall then, as well as generating some quite nice graphs, considering the Twitter follower-following networks of UK MPs appears to give a number of insights:While the Tories have the largest overall MP network, with the most average MP followers, they have fewer total followers than Labour MPs on average, indicating that Labour MPs may be more Twitter savvy and command stronger online presences.Parties also tend to cluster together with regard to MPs' follower-following relationships, and the Conservatives also appear to be the most insular party in terms of whether each party's MPs follow MPs from their own party or from others.The minor parties' interactions within the network vary quite a lot, likely due to the political beliefs of each party and their affiliations with other parties.Both the Conservative and Labour parties' within-party networks have interesting implications - showing differences due to politics and standing - the former appearing more important for the Labour network and the latter for the Conservatives.There are of course some caveats that go along with this kind of analysis, as it firstly only captures a specific point in time. Secondly, MPs’ actions on Twitter may not be carried out by the actual MP, but by their team or by external agencies - so who they interact with and follow on the platform may not actually represent their own choices and viewpoints. There are also probably some differences in how Twitter is used by MPs with regard to how much time they (or their team) spend on the platform and what reason they are using it; for example, some may just use it for PR, others to interact with their constituents and the public, others may have mostly inactive accounts but re-tweet the party leader every once in a while.In any case, I would be quite interested to extend this analysis to consider the follower-following relationships between MPs and verified non-MP users as I do already have the raw data for this. Looking at how these networks change over time could also be interesting. I would also think about further analysing the distribution of parliamentary groups within the Conservative network. Additionally, examining MPs’ tweets (e.g. the topics they tweet about, their sentiment and who they retweet and mention) is another project that could be intriguing.CitationsBastian, M., Heymann, S., &amp; Jacomy, M. (2009). Gephi: An Open Source Software for Exploring and Manipulating Networks. Proceedings of the International AAAI Conference on Web and Social Media, 3(1), 1. https://ojs.aaai.org/index.php/ICWSM/article/view/13937De Meo, P., Ferrara, E., Fiumara, G., &amp; Provetti, A. (2011). Generalized Louvain method for community detection in large networks. 11th International Conference on Intelligent Systems Design and Applications, 88–93. https://doi.org/10.1109/ISDA.2011.6121636.Jacomy, M., Venturini, T., Heymann, S., &amp; Bastian, M. (2014). ForceAtlas2, a Continuous Graph Layout Algorithm for Handy Network Visualization Designed for the Gephi Software. PLoS ONE, 9(6), e98679. https://doi.org/10.1371/journal.pone.0098679McLoughlin, L., Ward, S., Gibson, R., &amp; Southern, R. (2020). A tale of three tribes: UK MPs, Twitter and the EU Referendum campaign1. Information Polity, 25(1), 49–66. https://doi.org/10.3233/ip-190140Sleeman, C. (2015, April 24). The Twitter network for UK MPs. Nesta. https://www.nesta.org.uk/blog/twitter-network-uk-mps/Weaver, I. S., Williams, H., Cioroianu, I., Williams, M., Coan, T., &amp; Banducci, S. (2018). Dynamic social media affiliations among UK politicians. Social Networks, 54, 132–144. https://doi.org/10.1016/j.socnet.2018.01.008",
            "content_html": "<h2 id=\"introduction\">Introduction</h2><p>In recent years, Twitter has become increasingly prominent in politics, not least due to ex-US President Donald Trump’s questionable use of the platform. But across the pond in the UK, politicians’ Twitter presences have been gradually growing over the years, as more MPs (and their teams) get online and start tweeting. Nowadays, with the majority of UK MPs on Twitter, there is an opportunity to gain insight into a number of areas, including MPs’ networks, political beliefs and public appeal. This insight can be gleamed from analysing MPs’ behaviour on the social network; from what they tweet, who they retweet, who they follow, who follows them etc…</p><p>The area I would like to focus on in this blog post is the parliamentary twitter network as there is not a particularly large amount of research around this. A few previous reports and articles have shown than UK MPs generally tend to cluster together within their own parties, with regard to following relationships and also re-tweet networks (McLoughlin et al., 2019), (Sleeman, 2015), (Weaver et al., 2018). Although, events like the EU referendum have lead to more cross-party interaction in terms of at least tweeting behaviour (Weaver et al., 2018). However, most of this research is a number of years old and doesn’t really reflect the current parliament since the 2019 election. Moreover, the follower-following relationships of smaller parties (e.g. Lib Dems, SDLP, DUP) have not been looked at individually, as well as the within-party follower-following networks. So, in this post I am going to look at the follower-following relationships between UK MPs, with a focus on smaller parties’ overall networks and also on the within-party networks of the Labour and Conservative parties.</p><h2 id=\"data\">Data</h2><p>The data was gathered in February 2021 from Twitter’s API, using the Tweepy package in Python (as the data is from February, it doesn’t take into account any changes since then, e.g. Neale Hanvey &amp; Kenny MacAskill defecting from the SNP to the Alba party). I downloaded a spreadsheet from https://www.politics-social.com/ which contained each MP’s Twitter name, their party and their constituency. I then queried the API using Python to return a list of who each MP followed, along with their bio, follower count, like count, status count and a few other metrics. I ran into a few issues, e.g. some MPs had deleted their twitter accounts or had private profiles so I could not view their following list - so I removed those MPs from the dataset. As Twitter’s free API has limits on how much data you can download in a given period, it took over 10 hours for all the data to be collected. I then did a bit of data manipulation in Python and R to get the data into the correct format for analysis and visualisation. <a href=\"https://github.com/scottw2/UKMPsTwitter\">Python and R code available here</a>.</p><h2 id=\"outline-of-mp-follower-following-relationships\">Outline of MP Follower-Following Relationships</h2><p>In Table 1, I have arranged a number of summary statistics for each party. I have used median and Interquartile range (IQR) stats as there are a lot of outliers and the data is not normally distributed - you can see the distribution of the number of MP Followers for all parliamentarians in Figure 1. As previous research has shown, generally MPs’ following-followers relationships tend to mostly be to their own parties. This leads to the average MP followers statistic mostly reflecting the number of MPs on twitter for each party, although this relationship doesn’t really hold for some of the very small parties (see the below table). However, while the Conservatives have on average more MP followers (i.e. followers who are MPs), they actually have less median total followers than most other parties, including Labour and the SNP. The Green Party has the 4th highest average MP followers and by far the most average total followers, but that is obviously due to there being only one (popular) Green MP - Caroline Lucas. The SNP has a modest median total followers relative to the Tories, Labour and the Lib Dems, possibly reflecting the geographic focus of the party. The Lib Dems have quite a high median total followers and low median MP followers. The other minor parties have fairly similar total followers and MP follower counts, apart from Sinn Féin, who have a relatively low average MP followers and high median total followers, and the SDLP, who have very high values for both stats.</p><p><img src=\"/assets/images/uk-mp-twitter-network-analysis/table1.png\" alt=\"\" /><em>Table 1: Summary of parties’ twitter followings</em></p><p>Additionally, the Tories and Labour have quite a high variability of total followers, as measured by IQR, compared to other parties. Table 1 also shows the MPs from each party with the highest MP and total followers. For example, looking at Labour, Keir Starmer has the most MP followers, but with just over 1 million total followers, he trails ex-leader Jeremy Corbyn by a wide margin.</p><p><img src=\"/assets/images/uk-mp-twitter-network-analysis/figure1.png\" alt=\"\" /><em>Figure 1: Distribution of MP Followers by Party</em></p><p>Furthermore, ranking MPs by their number of MP followers can show some interesting results (see Table 2 below). Firstly, the majority of the MPs most followed by other MPs are Tories, with senior leadership and ex-leadership figures taking the top spots of the ranking. The Speaker, Lindsay Hoyle, however, comes in 3rd, reflecting his apolitical role in parliament. The only other non-Tory MPs in the top 25 are three Labour MPs - Keir Starmer, Ed Miliband and Wes Streeting.</p><p><img src=\"/assets/images/uk-mp-twitter-network-analysis/table2.png\" alt=\"\" /><em>Table 2: MPs followed by the most other MPs</em></p><p>One relationship, which I mentioned earlier and would like to expand on, is that while the Tories do on average have more MP followers than their Labour counterparts, Labour MPs on average have more total followers. This is visualised in Figure 2 (below). This seems to show that although the Conservatives are more linked to one another in terms of following relationships, they actually have a harder time getting follows from the general public compared to Labour. I suspect this is due to Twitter having a relatively left-wing user-base, combined with Labour MPs possibly having a stronger online presence. The distribution of MPs from other parties is also visible in the figure, with most of them clustered in the left hand side of the charts.</p><p>insert images</p><p>A great way to visualise the following-follower relations between MPs is network visualisation. To do this I used a piece of open source software called Gephi (Bastian et al., 2009). In short, networks are made up of nodes and edges (connections) between the nodes. I used an algorithm to create the network visualisations called ForceAtlas2 (Jacomy et al., 2014), which essentially creates a graph where each node is clustered together with other similar nodes (in terms of their connections). In this case, each node represents one MP and each edge shows that one MP follows another MP. The nodes are also coloured based on party affiliation and sized relative to the number of connections each MP has to other MPs (the labels are also thus sized by the same metric). Both follower and following relations are included.</p><p>From running this algorithm, the below visualisation (Figure 3) was produced. As we can see, each of the large parties have their own clusters, but there are some MPs from both the Conservative and Labour who have floated off a bit into the centre of the graph, as they have quite a few connections to MPs from other parties relative to their own parties. Notably, Eleanor Laign, Nadhim Zahawi, Matt Warman, Andrew Rosindell and James Cleverly for the Tories and Darren Jones, Wes Streeting, Luke Pollard, Chris Bryant and Keir Starmer for Labour. The Speaker, Lindsay Hoyle is by no surprise right in the middle of the graph. Generally the minor parties (including the SNP) are quite clustered together, apart from the DUP, but I will elaborate on this further in the next section.</p><p>insert images</p><p>While Figure 3 does visually show how parties are interconnected, I also thought it would be nice to quantify how insular parties and MPs are (e.g. what percentage of MPs followed by each specific MP belong to the same party as that specific MP?). You can see in Table<strong> </strong>3, that Conservative Party MPs were the most insular on average, followed by Labour and then the SNP and other minor parties. There were also 38 Conservative MPs who only followed other Tories, while there were only 5 Labour MPs who purely followed other Labour MPs. There were no MPs from other parties who only followed MPs from their own party. Additionally, in Figure 4 you can see that while Tory MPs in total had nearly twice the number of following relations to their own party compared to Labour’s own party relations, the Tories had fewer following relations to every other party (except the DUP) than Labour. One possible way to explain the difference in insularity across parties is that it is related to party size; less dominant and smaller parties require more collaboration with other parties to make an impact. The Conservative party, which has been the largest party and continuously in government since 2010, relies less on cross-party relationships compared to the other parties, so is therefore the most insular. You could also consider this from the opposite angle, looking at who each specific MP was followed by or you could look at mutual following-follower relationships.</p><p>insert images</p><h2 id=\"how-do-the-minor-parties-fit-into-the-network\">How Do the Minor Parties Fit Into the Network?</h2><p>Although it is fairly easy to see how the Labour and Conservative parties interact with one another, smaller party MPs’ connections are quite hard to distinguish in Figure 3. Thus I have filtered the graph to show only the connections of MPs of each of the smaller parties (visualised below in Figure 5 - click on each graph in Figure 5 for a closer look). In Figure 4, you can also see the number of following relationships from each specific party to each other party (<em>read the graph from the left across and down to find the number of following relationships from the source party (left) to each target party (bottom) and vice-versa for the number of followed relationships</em>).</p><p>insert images</p><p>Overall there are some interesting observations that generally correspond to each party’s political stance and to the extent they have worked with each of the other parties.</p><p><strong>The Alliance Party</strong> has a fairly even number of links with the Tories and Labour, and a number of links to the Lib Dems and the SNP and some of the other minor parties and NI parties.</p><p><strong>The DUP </strong>mostly has links with the Conservative party, likely because they have similar ideologies and also have worked with the Conservatives previously to prop up Theresa May’s government. They have few links to Labour and the SNP, but a number of links to some of the other NI parties.</p><p><strong>The Green Party</strong>, although having only one MP, have quite a number of links - especially to the Labour party. They also have a number of connections to the SNP, the Lib Dems and other minor parties like the SDLP, but few links to the Tories, relative to the number of connections to other parties and the size of the Tory party.</p><p><strong>The Liberal Democrats</strong> live up to their reputation as the party of the middle ground (at least excluding Brexit), as they are well connected to the two main parties and the SNP. They also have some links to parties like the Greens, SDLP and Alliance.</p><p><strong>Plaid Cymru</strong> are characterised by having denser links to the SNP compared to any other minor party and a roughly similar number of linkages to both the Conservatives and Labour.</p><p>The<strong> SDLP</strong> have more connections to Labour than the Conservatives and quite a few links to the SNP (more than Alliance, DUP and Sinn Féin, but less than Plaid Cymru and the Lib Dems).</p><p><strong>Sinn Féin </strong>have relatively minimal links to any of the other parties (relative to the number of MPs they have), especially compared to other NI parties like the DUP, Alliance or the SDLP, which is possibly representative of their abstentionist approach to the UK parliament. Although they do have more links to Labour than the Tories.</p><p><strong>The SNP</strong>, being the 3rd largest party in Westminster, have lots of connections to both Labour and the Tories (more to the former) as well as to most of the minor parties. To better see the SNP’s links to other smaller parties, take a look at each party’s own chart in Figure 5 or look at Figure 4.</p><p>insert gallery of minor parties</p><h2 id=\"within-party-communities\">Within-Party Communities</h2><p>It is also possible to look at the follower-following relations between MPs of just one party. The networks of Labour and the Conservatives are of course the largest and in my opinion thus the most interesting to consider when looking at within-party relations.</p><p>For these networks I have filtered the edges so that there are only connections between nodes if MPs have a mutual following relationship (i.e. they both follow each other’s accounts). I didn’t do this in the previous graphs as I thought it might remove a lot of detail for parties with few MPs and MPs with few connections, but looking within larger parties, I want to slim down the number of edges and focus on the stronger mutual following relations between MPs.</p><p>The networks are again made using the ForceAtlas2 algorithm, so nodes are situated near other similar nodes in terms their position in the network. I have also divided the network into a number of groups based on a community detection algorithm call the Louvain Method (De Meo et al., 2011). This algorithm divides the network into groups of “modularity classes” that generally have denser connections to nodes within the same class that to nodes within other classes. The algorithm has a parameter called “resolution”. Increasing the value of the resolution divides the network into fewer and larger groups and decreasing the value creates more and smaller groups. There thus seems to be a bit of discretion involved in choosing the resolution. I found that dividing the network into many small groups did not really produce anything that interesting and was quite noisy. Having 2-3 main groups per network seemed to be more revealing in terms of mutual following relationships.</p><p>Looking firstly at Labour&lt;/strong&gt; and employing the Louvain Method, I uncovered three communities within the network - designated by the different colours in Figure 6 (red, yellow and cyan). I’ve also created an interactive version of Figure 6 - https://scottw2.github.io/UKMPsTwitter/LabourNetwork/. For some reason the interactive graphs are upside down compared to the static ones.</p><p>The red community is generally those MPs to the political left of the party, e.g. Jeremy Corbyn, John McDonnell, Zara Sultana, Clive Lewis, Rebecca Long-Bailey. As another example, 33 of the 34 MPs in Labour’s Socialist Campaign Group, a left wing pressure group of MPs, can be found within the red community, with the remaining one in the yellow group.</p><p>The cyan community appears to be characterised by generally being comprised of Labour’s more centrist or soft-left MPs, e.g. Ed Milliband, Keir Starmer, Jess Phillips, Hilary Benn and Margaret Hodge. So it looks like the red and cyan communities can broadly by divided by left-right politics.</p><p>Those within the yellow community are probably MPs that are generally somewhere in the middle of Labour’s political spectrum, as demonstrated by most of the yellow community being in the centre of the network. This community can broadly be categorised by having a more evenly distributed number of links to red and blue community members compared to the balance of links the MPs in those two communities have with MPs in their own community compared to colleagues in the other community.</p><p>insert images</p><p><strong>Moving onto the Conservative network</strong>, there are again three main modularity classes as shown in Figure 7 (although a few individual MPs actually had their own additional classes), (dark) blue, cyan and orange. The interactive version of Figure 7 is here: https://scottw2.github.io/UKMPsTwitter/ToryNetwork/. The division of this network is a bit more nuanced than that of Labour, as I believe what the groups reveal is only somewhat based on (left-right) politics and partly based on seniority or “who you know”.</p><p>Within the orange group appears to be many of the most prominent Brexiteers, e.g. Michael Gove, Jacob Rees Mogg, Tom Tugendhat, Dominic Raab. However, there are some orange group MPs who were originally backing Remain but ended up endorsing Brexit after the referendum e.g. Chloe Smith, Helen Whatley and Alun Cairns. So there seems to be some additional factors linking this group together.</p><p>The blue community is also quite diverse politically, and similarly to the orange group, features a few big Brexiteers like Andrea Leadsom and Boris Johnson. What is interesting to note is that Johnson appears, not in a central position in the network, but on the left hand fringe, with his allies mostly spread around the top left section of the network. A second factor held in common by both the blue and orange groups is the prevalence of most “one nation” conservatives in those two groups, compared to the cyan group. The blue group is particularly populated by one nation Tories, with senior one nation Tories like Damian Green (Chair of the One Nation Conservative caucus) and Robert Buckland (Vice President of the Tory Reform Group - a one nation promoting pressure group) part of this community, along with a large number of other MPs reportedly following this ideology. Members of the Cornerstone Group, a collection of Tory MPs who espouse “traditional” socially conservative values, are also generally located within the orange and blue communities. Additionally, MPs who were members of the Thatcherite Free Enterprise Group, founded by Liz Truss, are mostly situated in the blue community, but with some spillover to the orange and cyan groups - more so to the former.</p><p>The cyan community appears to be made up of some more senior MPs near the centre of the network, but also the majority of the new MPs who were elected for the first time in the 2019 general election, particularly in the fringe of the cyan network. This implies, to an extent, there is a possible division of seniority between the orange/blue and cyan communities. This may also explain why there are less members of the parliamentary groups mentioned in the previous paragraph within the cyan community - as new MPs may not have had time to integrate themselves into the different groups within the party, or at least haven’t been listed as members online yet.</p><p>Nevertheless, there still appears to be a division of seniority between the orange/blue and cyan groups, which could be down to a number of reasons. Firstly, as there is generally some clustering of the party based on a combination of seniority and ideology, maybe some of the old guard are somewhat suspicious of the new MPs, particularly those elected into traditionally Labour constituencies, and have thus kept their distance. On the other hand, this may just be a division within the Twitterverse, and newer and more senior MPs might just not have connected on Twitter yet. Plus it possibly may be to do with some kind of social media strategy during the general election, where new candidates’ Twitter accounts were set up and made to follow one another, so newer MPs are very interconnected with one another but have relatively fewer connections to many senior MPs.<strong> </strong></p><p>Overall, I suspect the divisions of the network may be a product of all three reasons and maybe some others I haven’t thought of. This possibly reveals that current Tory MPs are a bit more cliquey and hierarchical compared to the Labour party (at-least on Twitter). Although this difference could also be due to the influx of new Tory MPs and decrease in Labour MPs in 2019. In any case, the current Labour networks appears to be more politically divided between the left and right compared to the Conservative network.</p><p>insert images</p><h2 id=\"conclusion\">Conclusion</h2><p>Overall then, as well as generating some quite nice graphs, considering the Twitter follower-following networks of UK MPs appears to give a number of insights:</p><li>While the Tories have the largest overall MP network, with the most average MP followers, they have fewer total followers than Labour MPs on average, indicating that Labour MPs may be more Twitter savvy and command stronger online presences.</li><li>Parties also tend to cluster together with regard to MPs' follower-following relationships, and the Conservatives also appear to be the most insular party in terms of whether each party's MPs follow MPs from their own party or from others.</li><li>The minor parties' interactions within the network vary quite a lot, likely due to the political beliefs of each party and their affiliations with other parties.</li><li>Both the Conservative and Labour parties' within-party networks have interesting implications - showing differences due to politics and standing - the former appearing more important for the Labour network and the latter for the Conservatives.</li><p>There are of course some caveats that go along with this kind of analysis, as it firstly only captures a specific point in time. Secondly, MPs’ actions on Twitter may not be carried out by the actual MP, but by their team or by external agencies - so who they interact with and follow on the platform may not actually represent their own choices and viewpoints. There are also probably some differences in how Twitter is used by MPs with regard to how much time they (or their team) spend on the platform and what reason they are using it; for example, some may just use it for PR, others to interact with their constituents and the public, others may have mostly inactive accounts but re-tweet the party leader every once in a while.</p><p>In any case, I would be quite interested to extend this analysis to consider the follower-following relationships between MPs and verified non-MP users as I do already have the raw data for this. Looking at how these networks change over time could also be interesting. I would also think about further analysing the distribution of parliamentary groups within the Conservative network. Additionally, examining MPs’ tweets (e.g. the topics they tweet about, their sentiment and who they retweet and mention) is another project that could be intriguing.</p><h2 id=\"citations\">Citations</h2><p>Bastian, M., Heymann, S., &amp; Jacomy, M. (2009). Gephi: An Open Source Software for Exploring and Manipulating Networks. <em>Proceedings of the International AAAI Conference on Web and Social Media</em>, <em>3</em>(1), 1. https://ojs.aaai.org/index.php/ICWSM/article/view/13937</p><p>De Meo, P., Ferrara, E., Fiumara, G., &amp; Provetti, A. (2011). Generalized Louvain method for community detection in large networks. <em>11th International Conference on Intelligent Systems Design and Applications</em>, 88–93. https://doi.org/10.1109/ISDA.2011.6121636.</p><p>Jacomy, M., Venturini, T., Heymann, S., &amp; Bastian, M. (2014). ForceAtlas2, a Continuous Graph Layout Algorithm for Handy Network Visualization Designed for the Gephi Software. <em>PLoS ONE</em>, <em>9</em>(6), e98679. https://doi.org/10.1371/journal.pone.0098679</p><p>McLoughlin, L., Ward, S., Gibson, R., &amp; Southern, R. (2020). A tale of three tribes: UK MPs, Twitter and the EU Referendum campaign1. <em>Information Polity</em>, <em>25</em>(1), 49–66. https://doi.org/10.3233/ip-190140</p><p>Sleeman, C. (2015, April 24). <em>The Twitter network for UK MPs</em>. Nesta. https://www.nesta.org.uk/blog/twitter-network-uk-mps/</p><p>Weaver, I. S., Williams, H., Cioroianu, I., Williams, M., Coan, T., &amp; Banducci, S. (2018). Dynamic social media affiliations among UK politicians. <em>Social Networks</em>, <em>54</em>, 132–144. https://doi.org/10.1016/j.socnet.2018.01.008</p>",
            "url": "http://localhost:4000/2022/06/18/uk-mp-twitter-network-analysis",
            
            
            
            "tags": ["R","Python"],
            
            "date_published": "2022-06-18T00:00:00+01:00",
            "date_modified": "2022-06-18T00:00:00+01:00",
            
                "author": 
                "{"twitter"=>nil, "name"=>nil, "avatar"=>nil, "email"=>nil, "url"=>nil}"
                
            
        }
    
    ]
}